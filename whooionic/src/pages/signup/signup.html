<!--
  Generated template for the SignupPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

    <ion-navbar>
        <ion-title>Registrarme</ion-title>
    </ion-navbar>

</ion-header>


<ion-content>
    <ion-list>
        <ion-item-divider color="primary">Detalles Personales</ion-item-divider>
        <ion-item>
            <ion-label>Nombre</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.first_name"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label>Apellido</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.last_name"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label>Email</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.email" (blur)="checkEmail()" [ngClass]="{'invalid': emailValid !== 'pristine' && !emailValid}"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label>Username</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.username"></ion-input>
        </ion-item>

        <ion-item>
            <ion-label>Password</ion-label>
            <ion-input type="password" [(ngModel)]="newUser.password"></ion-input>
        </ion-item>

        <ion-item-divider color="primary">Detalles de Facturación</ion-item-divider>
        <ion-item>
            <ion-label>Dirección Línea 1</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.billing.address_1"></ion-input>
        </ion-item>
        <ion-item>
            <ion-label>Dirección Línea 2</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.billing.address_2"></ion-input>
        </ion-item>
        <ion-item>
            <ion-label>País</ion-label>
            <ion-select [(ngModel)]="newUser.billing.country" (ionChange)="loadStates(newUser.billing.country)">
                <ion-option [value]="country.code" *ngFor="let country of countries">{{ country.name }}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>Provincia</ion-label>
            <ion-select [(ngModel)]="newUser.billing.state">
                <ion-option [value]="state.code" *ngFor="let state of states">{{ state.name }}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item>
            <ion-label>Ciudad</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.billing.city"></ion-input>
        </ion-item>
        <ion-item>
            <ion-label>Codigo Postal</ion-label>
            <ion-input type="number" [(ngModel)]="newUser.billing.postcode"></ion-input>
        </ion-item>
        <ion-item>
            <ion-label>Teléfono</ion-label>
            <ion-input type="tel" [(ngModel)]="newUser.billing.phone"></ion-input>
        </ion-item>
        <ion-item>
            <ion-label>Mismos datos de Envío</ion-label>
            <ion-checkbox (ionChange)="setBillingToShipping()" checked="{{ sameBillingShipping }}"></ion-checkbox>
        </ion-item>

        <ion-item-divider color="primary" *ngIf="!sameBillingShipping">Detalles de Envío</ion-item-divider>
        <ion-item *ngIf="!sameBillingShipping">
            <ion-label>Dirección Línea 1</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.shipping.address_1"></ion-input>
        </ion-item>
        <ion-item *ngIf="!sameBillingShipping">
            <ion-label>Dirección Línea 2</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.shipping.address_2"></ion-input>
        </ion-item>
        <ion-item *ngIf="!sameBillingShipping">
            <ion-label>País</ion-label>
            <ion-select [(ngModel)]="newUser.shipping.country" (ionChange)="loadStates2(newUser.shipping.country)">
                <ion-option [value]="country.code" *ngFor="let country of countries">{{ country.name }}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item *ngIf="!sameBillingShipping">
            <ion-label>Provincia</ion-label>
            <ion-select [(ngModel)]="newUser.shipping.state">
                <ion-option [value]="state2.code" *ngFor="let state2 of states2">{{ state2.name }}</ion-option>
            </ion-select>
        </ion-item>
        <ion-item *ngIf="!sameBillingShipping">
            <ion-label>Ciudad</ion-label>
            <ion-input type="text" [(ngModel)]="newUser.shipping.city"></ion-input>
        </ion-item>
        <ion-item *ngIf="!sameBillingShipping">
            <ion-label>Codigo Postal</ion-label>
            <ion-input type="number" [(ngModel)]="newUser.shipping.postcode"></ion-input>
        </ion-item>

    </ion-list>

</ion-content>

<ion-footer>
    <button ion-button block (click)="signup()">Registrarme</button>
</ion-footer>